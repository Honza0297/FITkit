{
    "app-id": "org.FITVUT.qdevkit",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "18.08",
    "sdk": "org.freedesktop.Sdk",
    "command": "qdevkit",
    "modules": [    
       {
            "name": "libssh",
            "buildsystem": "cmake-ninja",
            "builddir": true,
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.libssh.org/files/0.9/libssh-0.9.0.tar.xz",
                    "sha256": "25303c2995e663cd169fdd902bae88106f48242d7e96311d74f812023482c7a5"   
                }
            ]
        },
        "shared-modules/qt4/qt4-4.8.7-minimal.json",
        {
            "name": "fcmake",
            "buildsystem": "cmake",
            "sources": [
                {
                    "type": "archive",
                    "path": "fcmake-current.tar.gz"
                }
            ]
        },
         {
            "name": "libusb",
            "config-opts": [ "--disable-static", "--disable-udev" ],
            "cleanup": [
                "/lib/*.la",
                "/lib/pkgconfig",
                "/include"
            ],

            "sources": [
                {
                    "type": "archive",
                    "path": "libusb-0.1.12.tar.gz"
                }
            ]
        },
                {
            "name": "swig",
            "config-opts": ["--without-boost", "--without-pcre"],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://prdownloads.sourceforge.net/swig/swig-3.0.7.tar.gz",
                    "sha256": "06dc8816a225667ce1eee545af3caf87e1bbaa379c32838d4cea53152514348d"
                }
            ]
        },
        {
            "name": "libftdi",
            "buildsystem": "cmake",
            "sources": [
                {
                    "type": "archive",
                    "path": "libftdi-0.20.tar.gz"  
                }
            ]
        },
        {
            "name": "libkitclient",
            "buildsystem": "cmake",
            "config-opts": ["-DCPACK_PACKAGING_INSTALL_PREFIX=/app -DPREFIX=/app"],
            "build-options": {
                            "env": {
                            "CXXFLAGS": "-pthread"
                            }
            },
            "sources": [
                {
                    "type": "archive",
                    "path": "libkitclient-current.tar.gz"
                }
            ]
        },
        {
        "name": "python-2.5",
        "sources": [
            {
                "type": "archive",
                "url": "https://www.python.org/ftp/python/2.5/Python-2.5.tar.bz2",
                "sha256": "584fce420e39218312c86b6abb242a14b1b0c1d215e2667b0f491893e41cc236"
            }
        ],
        "config-opts": [
            "--enable-shared",
            "--with-ensurepip=yes",
            "--with-system-expat",
            "--with-system-ffi",
            "--enable-loadable-sqlite-extensions",
            "--with-dbmliborder=gdbm",
            "--enable-unicode=ucs4"
        ],
        "post-install": [
            /* Theres seem to be a permissions missmatch that causes the debug stripping to fail */
            "chmod 644 $FLATPAK_DEST/lib/libpython2.5.so.1.0"
        ],
        "cleanup": [
            "/bin/2to3*",
            "/bin/easy_install*",
            "/bin/idle*",
            "/bin/pyvenv*",
            "/bin/pydoc*",
            "/include",
            "/share",

            /* Test scripts */
            "/lib/python*/test",
            "/lib/python*/*/test",
            "/lib/python*/*/tests",
            "/lib/python*/lib-tk/test",
            "/lib/python*/lib-dynload/_*_test.*.so",
            "/lib/python*/lib-dynload/_test*.*.so",

            /* Unused modules */
            "/lib/python*/idlelib",
            "/lib/python*/tkinter*",
            "/lib/python*/turtle*",
            "/lib/python*/lib2to3*",
            
            /* Static library */
            "/lib/python2.5/config/libpython2.5.a"
        ]
    },

        {
            "name": "fkflash",
            "buildsystem": "cmake",
            "sources": [
                {
                    "type": "archive",
                    "path": "fkflash-current.tar.gz"
                }
            ]
        },
        {
            "name": "pythonqt",
            "buildsystem": "cmake",
            "sources": [
                {
                    "type": "archive",
                    "path": "pythonqt-current.tar.gz"
                }
            ]
        },
        {
            "name": "qdevkit",
            "buildsystem": "cmake",
            "sources": [
                {
                    "type": "archive",
                    "path": "qdevkit-current.tar.gz"
                }
            ]
        },
        {
            "name": "qdevkit-plugins",
            "buildsystem": "cmake",
            
            "sources": [
                {
                    "type": "archive",
                    "path": "qdevkit-plugins-current.tar.gz"
                }
            ]
        }
    ]
}
