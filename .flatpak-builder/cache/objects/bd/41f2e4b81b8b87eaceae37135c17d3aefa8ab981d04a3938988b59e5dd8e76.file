{
  "id" : "org.FITVUT.qdevkit",
  "runtime" : "org.freedesktop.Platform",
  "runtime-version" : "18.08",
  "runtime-commit" : "41d9198ae57bde4459e0945f8c7a00cd1e98724f215b664c74024183b4267197",
  "sdk" : "org.freedesktop.Sdk",
  "sdk-commit" : "65d917e01996932cae81bcad5d5250b1b3eedef1340996f6ed932bf7ca479a92",
  "command" : "qdevkit",
  "modules" : [
    {
      "name" : "libssh",
      "buildsystem" : "cmake-ninja",
      "builddir" : true,
      "sources" : [
        {
          "url" : "https://www.libssh.org/files/0.9/libssh-0.9.0.tar.xz",
          "sha256" : "25303c2995e663cd169fdd902bae88106f48242d7e96311d74f812023482c7a5",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "qt4",
      "config-opts" : [
        "-verbose",
        "-confirm-license",
        "-opensource",
        "-release",
        "-shared",
        "-no-static",
        "-fast",
        "-datadir",
        "/app/lib/qt4",
        "-importdir",
        "/app/lib/qt4/imports",
        "-plugindir",
        "/app/lib/qt4/plugins",
        "-translationdir",
        "/app/share/qt4/translations",
        "-accessibility",
        "-exceptions",
        "-fontconfig",
        "-glib",
        "-dbus-linked",
        "-openssl-linked",
        "-optimized-qmake",
        "-system-libjpeg",
        "-system-libpng",
        "-system-libtiff",
        "-system-proxies",
        "-system-zlib",
        "-no-cups",
        "-no-declarative",
        "-no-gtkstyle",
        "-no-javascript-jit",
        "-no-libmng",
        "-no-multimedia",
        "-no-nis",
        "-no-opengl",
        "-no-phonon",
        "-no-phonon-backend",
        "-no-qt3support",
        "-no-rpath",
        "-no-script",
        "-no-scripttools",
        "-no-sql-db2",
        "-no-sql-ibase",
        "-no-sql-mysql",
        "-no-sql-oci",
        "-no-sql-odbc",
        "-no-sql-psql",
        "-no-sql-sqlite",
        "-no-sql-sqlite2",
        "-no-sql-sqlite_symbian",
        "-no-sql-symsql",
        "-no-sql-tds",
        "-no-svg",
        "-no-webkit",
        "-no-xmlpatterns",
        "-nomake",
        "demos",
        "-nomake",
        "docs",
        "-nomake",
        "examples"
      ],
      "sources" : [
        {
          "url" : "https://download.qt.io/archive/qt/4.8/4.8.7/qt-everywhere-opensource-src-4.8.7.tar.gz",
          "sha256" : "e2882295097e47fe089f8ac741a95fef47e0a73a3f3cdf21b56990638f626ea0",
          "type" : "archive"
        },
        {
          "path" : "qt4-aarch64.patch",
          "type" : "patch"
        },
        {
          "path" : "disable-sslv3.patch",
          "type" : "patch"
        },
        {
          "commands" : [
            "sed -i \"s|-O2|${CXXFLAGS}|\" mkspecs/common/{g++,gcc}-base.conf",
            "sed -i \"/^QMAKE_LFLAGS_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/gcc-base-unix.conf",
            "sed -i \"/^QMAKE_LFLAGSs/s|+=|+= ${LDFLAGS}|g\" mkspecs/common/gcc-base.conf"
          ],
          "type" : "shell"
        },
        {
          "path" : "qt4-openssl-1.1.patch",
          "type" : "file"
        },
        {
          "commands" : [
            "echo -e '#include<openssl/opensslv.h>\nint main(){return OPENSSL_VERSION_NUMBER>=0x010100000L?0:1;}' >has_openssl_1_1.c",
            "gcc ${CFLAGS} has_openssl_1_1.c -o has_openssl_1_1",
            "if ./has_openssl_1_1; then patch -p1 -i qt4-openssl-1.1.patch; fi"
          ],
          "type" : "shell"
        }
      ],
      "build-options" : {
        "env" : {
          "CXXFLAGS" : "-std=gnu++98 -O2",
          "LD_LIBRARY_PATH" : "/run/build/qt4/lib/"
        }
      },
      "cleanup" : [
        "/bin",
        "/include",
        "/lib/*.a",
        "/lib/*.la",
        "/lib/*.prl",
        "/lib/pkgconfig",
        "/lib/qt4/mkspecs",
        "/lib/qt4/q3porting.xml"
      ]
    },
    {
      "name" : "fcmake",
      "buildsystem" : "cmake",
      "sources" : [
        {
          "path" : "fcmake-current.tar.gz",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "libusb",
      "config-opts" : [
        "--disable-static",
        "--disable-udev"
      ],
      "sources" : [
        {
          "path" : "libusb-0.1.12.tar.gz",
          "type" : "archive"
        }
      ],
      "cleanup" : [
        "/lib/*.la",
        "/lib/pkgconfig",
        "/include"
      ]
    },
    {
      "name" : "swig",
      "config-opts" : [
        "--without-boost",
        "--without-pcre"
      ],
      "sources" : [
        {
          "url" : "http://prdownloads.sourceforge.net/swig/swig-3.0.7.tar.gz",
          "sha256" : "06dc8816a225667ce1eee545af3caf87e1bbaa379c32838d4cea53152514348d",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "libftdi",
      "buildsystem" : "cmake",
      "sources" : [
        {
          "path" : "libftdi-0.20.tar.gz",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "libkitclient",
      "buildsystem" : "cmake",
      "config-opts" : [
        "-DCPACK_PACKAGING_INSTALL_PREFIX=/app -DPREFIX=/app"
      ],
      "sources" : [
        {
          "path" : "libkitclient-current.tar.gz",
          "type" : "archive"
        }
      ],
      "build-options" : {
        "env" : {
          "CXXFLAGS" : "-pthread"
        }
      }
    },
    {
      "name" : "fkflash",
      "buildsystem" : "cmake",
      "sources" : [
        {
          "path" : "fkflash-current.tar.gz",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "pythonqt",
      "buildsystem" : "cmake",
      "config-opts" : [
        "-DLIB_INSTALL_DIR:PATH=%{_libdir}"
      ],
      "sources" : [
        {
          "path" : "PythonQt3.zip",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "qdevkit",
      "buildsystem" : "cmake",
      "sources" : [
        {
          "path" : "qdevkit-current.tar.gz",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "qdevkit-plugins",
      "buildsystem" : "cmake",
      "sources" : [
        {
          "path" : "qdevkit-plugins-current.tar.gz",
          "type" : "archive"
        }
      ]
    }
  ]
}